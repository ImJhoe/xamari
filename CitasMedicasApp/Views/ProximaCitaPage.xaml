<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CitasMedicasApp.Views.ProximaCitaPage"
             Title="Mi Próxima Cita">

    <ContentPage.Content>
        <ScrollView Padding="20" BackgroundColor="#f8f9fa">
            <StackLayout Spacing="20">

                <!-- Título -->
                <Frame BackgroundColor="#27ae60" HasShadow="True" CornerRadius="10">
                    <StackLayout Orientation="Horizontal" Spacing="10">
                        <Label Text="⏰" FontSize="24"/>
                        <Label Text="MI PRÓXIMA CITA" 
                               TextColor="White" 
                               FontSize="16" 
                               FontAttributes="Bold"
                               VerticalOptions="Center"/>
                    </StackLayout>
                </Frame>

                <!-- Información de la próxima cita -->
                <Frame x:Name="CitaFrame" 
                       BackgroundColor="White" 
                       HasShadow="True" 
                       CornerRadius="10"
                       IsVisible="False">
                    <StackLayout Spacing="15">
                        <Label x:Name="CitaTituloLabel" 
                               FontAttributes="Bold" 
                               FontSize="18"
                               TextColor="#27ae60"
                               HorizontalOptions="Center"/>

                        <!-- Información del médico -->
                        <Frame BackgroundColor="#ecf0f1" CornerRadius="8">
                            <StackLayout Spacing="5">
                                <Label Text="👨‍⚕️ MÉDICO" 
                                       FontAttributes="Bold" 
                                       FontSize="14"
                                       TextColor="#2c3e50"/>
                                <Label x:Name="MedicoLabel" 
                                       FontSize="16"
                                       TextColor="#34495e"/>
                                <Label x:Name="EspecialidadLabel" 
                                       FontSize="12"
                                       TextColor="#7f8c8d"/>
                            </StackLayout>
                        </Frame>

                        <!-- Fecha y hora -->
                        <Frame BackgroundColor="#e8f6f3" CornerRadius="8">
                            <StackLayout Spacing="5">
                                <Label Text="📅 FECHA Y HORA" 
                                       FontAttributes="Bold" 
                                       FontSize="14"
                                       TextColor="#2c3e50"/>
                                <Label x:Name="FechaLabel" 
                                       FontSize="16"
                                       TextColor="#27ae60"
                                       FontAttributes="Bold"/>
                                <Label x:Name="HoraLabel" 
                                       FontSize="16"
                                       TextColor="#27ae60"
                                       FontAttributes="Bold"/>
                                <Label x:Name="TiempoRestanteLabel" 
                                       FontSize="12"
                                       TextColor="#e67e22"/>
                            </StackLayout>
                        </Frame>

                        <!-- Ubicación -->
                        <Frame BackgroundColor="#fdf2e9" CornerRadius="8">
                            <StackLayout Spacing="5">
                                <Label Text="📍 UBICACIÓN" 
                                       FontAttributes="Bold" 
                                       FontSize="14"
                                       TextColor="#2c3e50"/>
                                <Label x:Name="SucursalLabel" 
                                       FontSize="14"
                                       TextColor="#e67e22"/>
                                <Label x:Name="DireccionLabel" 
                                       FontSize="12"
                                       TextColor="#7f8c8d"/>
                            </StackLayout>
                        </Frame>

                        <!-- Estado de la cita -->
                        <Frame x:Name="EstadoFrame" CornerRadius="8">
                            <StackLayout Spacing="5">
                                <Label Text="📋 ESTADO" 
                                       FontAttributes="Bold" 
                                       FontSize="14"
                                       TextColor="#2c3e50"/>
                                <Label x:Name="EstadoLabel" 
                                       FontSize="14"
                                       FontAttributes="Bold"/>
                            </StackLayout>
                        </Frame>

                        <!-- Botones de acción -->
                        <StackLayout Spacing="10">
                            <Button x:Name="ReagendarButton"
                                    Text="📅 REAGENDAR CITA"
                                    BackgroundColor="#3498db"
                                    TextColor="White"
                                    CornerRadius="25"
                                    Clicked="OnReagendarClicked"
                                    IsVisible="False"/>

                            <Button x:Name="CancelarButton"
                                    Text="❌ CANCELAR CITA"
                                    BackgroundColor="#e74c3c"
                                    TextColor="White"
                                    CornerRadius="25"
                                    Clicked="OnCancelarClicked"
                                    IsVisible="False"/>
                        </StackLayout>
                    </StackLayout>
                </Frame>

                <!-- Sin próxima cita -->
                <Frame x:Name="SinCitaFrame" 
                       BackgroundColor="White" 
                       HasShadow="True" 
                       CornerRadius="10"
                       IsVisible="False">
                    <StackLayout Spacing="20" Padding="20">
                        <Label Text="📅" 
                               FontSize="60" 
                               HorizontalOptions="Center"
                               TextColor="#bdc3c7"/>

                        <Label Text="NO TIENES CITAS PRÓXIMAS" 
                               FontAttributes="Bold" 
                               FontSize="16"
                               TextColor="#7f8c8d"
                               HorizontalOptions="Center"/>

                        <Label Text="Cuando tengas una cita programada, aparecerá aquí con todos los detalles." 
                               FontSize="14"
                               TextColor="#95a5a6"
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center"/>

                        <Button Text="📋 VER TODAS MIS CITAS"
                                BackgroundColor="#95a5a6"
                                TextColor="White"
                                CornerRadius="25"
                                Clicked="OnVerTodasCitasClicked"/>
                    </StackLayout>
                </Frame>

                <!-- Loading indicator -->
                <ActivityIndicator x:Name="LoadingIndicator" 
                                 IsVisible="False" 
                                 IsRunning="False" 
                                 Color="#27ae60"/>

            </StackLayout>
        </ScrollView>
    </ContentPage.Content>
</ContentPage>